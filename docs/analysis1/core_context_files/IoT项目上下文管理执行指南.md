# IoT行业软件架构项目上下文管理执行指南

## 1. 执行概述

本指南提供IoT行业软件架构分析与重构项目上下文管理的具体执行步骤、模板和最佳实践，作为《IoT项目上下文管理指南》的配套实施文档。通过严格执行本指南，可确保项目在复杂环境下保持连续性，提高知识管理效率。

## 2. 日常上下文管理执行流程

### 2.1 工作开始前的上下文加载

**执行步骤**:

1. **回顾总体上下文** (5-10分钟)
   - 阅读`context_management.md`获取项目总体状态
   - 查看`项目未来发展规划.md`了解当前阶段目标
   - 确认当前工作在知识图谱中的位置

2. **加载特定主题上下文** (10-15分钟)
   - 阅读相关主题的`context.md`文件
   - 查看最近的工作记录和进展
   - 了解当前任务的优先级和依赖关系

3. **准备工作环境** (5-10分钟)
   - 打开相关文档和代码
   - 准备必要的工具和资源
   - 检查参考资料的可用性

### 2.2 工作过程中的上下文维护

**执行步骤**:

1. **实时记录** (持续进行)
   - 使用注释记录重要思考
   - 标记关键决策点和理由
   - 记录遇到的问题和解决思路

2. **阶段性总结** (每1-2小时)
   - 简要总结已完成的工作
   - 更新任务状态和进度
   - 调整剩余工作的计划

3. **知识点管理** (随时进行)
   - 将新发现的知识点记录到临时知识列表
   - 标记需要更新的术语和定义
   - 记录文档间的新关联关系

### 2.3 工作结束时的上下文保存

**执行步骤**:

1. **更新工作状态** (10-15分钟)
   - 记录已完成和未完成的工作项
   - 更新任务完成百分比
   - 标记关键成果和里程碑

2. **整理知识更新** (15-20分钟)
   - 将临时知识点添加到知识节点索引
   - 更新术语表和定义
   - 更新知识图谱中的关系

3. **记录下一步计划** (10分钟)
   - 列出下一工作会话的优先任务
   - 记录需要解决的问题
   - 设置明确的恢复点

4. **完成上下文文件更新** (15-20分钟)
   - 更新主题`context.md`文件
   - 必要时更新`context_management.md`
   - 保存工作日志和决策记录

## 3. 上下文管理模板

### 3.1 工作会话记录模板

```markdown
# 工作会话记录

## 基本信息
- **日期**: YYYY-MM-DD
- **时间**: HH:MM - HH:MM
- **主题**: [主题名称]
- **任务**: [具体任务描述]

## 工作开始状态
- **上次进度**: [描述上次工作的进度]
- **计划目标**: [本次会话计划完成的目标]
- **相关资源**: [列出会话所需的关键资源]

## 工作记录
### 已完成工作
- [工作项1]: [详细描述和结果]
- [工作项2]: [详细描述和结果]
...

### 决策记录
- **决策1**: [决策内容]
  - **原因**: [决策理由]
  - **考虑的替代方案**: [其他方案]
  - **影响**: [决策可能产生的影响]

### 遇到的问题
- **问题1**: [问题描述]
  - **尝试的解决方案**: [已尝试的方法]
  - **当前状态**: [解决/未解决/部分解决]
  - **下一步**: [解决问题的计划]

## 工作结束状态
- **完成度**: [估计完成百分比]
- **未完成项**: [列出未完成的工作项]
- **新发现**: [工作过程中的新发现]

## 下一步计划
- **优先任务**: [下一步优先处理的任务]
- **预计时间**: [完成优先任务所需的预计时间]
- **恢复点**: [明确的恢复位置和状态]

## 知识更新
- **新知识点**: [新发现的知识点]
- **需更新术语**: [需要添加或修改的术语]
- **文档关联**: [发现的文档间关联]
```

### 3.2 主题上下文文件模板

```markdown
# [主题名称] 上下文管理

## 主题概述
- **描述**: [主题的简要描述]
- **目标**: [主题的主要目标]
- **关联领域**: [相关联的其他主题]

## 当前状态
- **完成度**: [估计完成百分比]
- **阶段**: [规划/分析/设计/实现/文档/评审]
- **最近更新**: [最近更新的日期和内容]

## 关键概念
- **概念1**: [简要定义和说明]
- **概念2**: [简要定义和说明]
...

## 文件结构
- **[文件1]**: [文件描述和当前状态]
- **[文件2]**: [文件描述和当前状态]
...

## 待解决问题
- **问题1**: [问题描述和当前思考]
- **问题2**: [问题描述和当前思考]
...

## 工作计划
- **短期任务**: [近期需完成的任务]
- **中期目标**: [1-2周内的目标]
- **长期规划**: [更长远的规划]

## 决策记录
- **决策1**: [决策内容和日期]
  - **原因**: [决策理由]
  - **影响**: [决策影响]
...

## 参考资源
- **内部文档**: [相关内部文档链接]
- **外部资源**: [相关外部资源链接]
```

### 3.3 知识点记录模板

```markdown
# 知识点记录

## 基本信息
- **名称**: [知识点名称]
- **类型**: [概念/定义/定理/算法/模式/最佳实践]
- **领域**: [所属领域]
- **添加日期**: YYYY-MM-DD
- **重要性**: [高/中/低]
- **成熟度**: [草稿/已验证/已应用]

## 内容
### 形式化定义
```latex
[形式化定义的LaTeX表示]
```

### 说明

[详细说明和解释]

### 示例

[具体示例或应用场景]

## 关联

- **前置知识**: [依赖的其他知识点]
- **相关知识**: [相关联的知识点]
- **应用场景**: [适用的场景]
- **引用文献**: [相关参考文献]

## 实现参考

### Rust实现

```rust
[Rust代码示例]
```

### Go实现

```go
[Go代码示例]
```

## 演进历史

- **版本1.0**: [初始版本描述和日期]
- **版本1.1**: [更新内容和日期]

## 参考资料

- [参考资料1]
- [参考资料2]

## 4. 上下文切换执行指南

### 4.1 计划内切换执行步骤

**执行步骤**:

1. **评估切换必要性** (5分钟)
   - 确认切换的原因和必要性
   - 评估当前任务的完成度
   - 判断是否在合适的断点

2. **保存当前上下文** (15-20分钟)
   - 完成"工作会话记录"
   - 保存当前工作状态
   - 标记明确的恢复点

3. **准备切换** (5-10分钟)
   - 整理工作环境
   - 关闭不需要的资源
   - 准备切换记录文档

4. **执行切换** (按切换类型不同，10-30分钟)
   - 填写切换记录
   - 进行必要的心理调整
   - 准备新上下文所需资源

5. **加载新上下文** (15-20分钟)
   - 回顾新上下文的背景和目标
   - 查看之前的工作和进度
   - 确定起点和初始任务

### 4.2 紧急切换执行步骤

**执行步骤**:

1. **快速保存** (5分钟)
   - 记录当前关键思路
   - 标记未完成的工作
   - 设置简要恢复点

2. **快速切换** (5分钟)
   - 记录切换原因
   - 估计切换时长
   - 准备必要资源

3. **返回准备** (5分钟)
   - 记录返回提醒
   - 设置恢复标记
   - 安排返回时间

### 4.3 上下文切换记录模板

```markdown
# 上下文切换记录

## 基本信息
- **日期**: YYYY-MM-DD
- **时间**: HH:MM
- **切换类型**: [任务级/主题级/抽象层次级]
- **从**: [原上下文]
- **到**: [目标上下文]

## 切换原因
[详细描述切换的原因和必要性]

## 原上下文状态
- **完成度**: [估计完成百分比]
- **当前位置**: [具体文件/章节/代码位置]
- **当前思路**: [当前的思考方向和思路]
- **未完成项**: [尚未完成的工作]

## 恢复点设置
- **文件位置**: [具体文件和位置]
- **关键思路**: [需要记住的关键思路]
- **下一步**: [恢复后应首先执行的步骤]
- **相关资源**: [恢复时需要的资源]

## 概念映射
| 原上下文概念 | 目标上下文概念 | 关系说明 |
|------------|--------------|---------|
| [概念1]     | [概念1']     | [关系说明] |
| [概念2]     | [概念2']     | [关系说明] |

## 目标上下文准备
- **回顾资料**: [需要回顾的文档/代码]
- **起点**: [开始工作的位置]
- **初始任务**: [首先要完成的任务]
- **所需资源**: [需要准备的资源]
```

## 5. 中断恢复流程

### 5.1 短期中断恢复流程

**适用场景**: 数小时至1天的中断

**执行步骤**:

1. **回顾工作记录** (5-10分钟)
   - 查看最近的工作会话记录
   - 确认中断前的任务和进度
   - 查看记录的恢复点

2. **恢复工作环境** (5-10分钟)
   - 打开相关文档和代码
   - 恢复工作环境配置
   - 准备必要的参考资料

3. **重建思路** (10-15分钟)
   - 回顾中断前的思考路径
   - 查看记录的关键决策点
   - 重新进入问题解决的思维状态

4. **继续工作** (立即开始)
   - 从恢复点继续任务
   - 先处理简单的子任务
   - 逐步恢复到复杂问题

### 5.2 中期中断恢复流程

**适用场景**: 数天的中断

**执行步骤**:

1. **回顾上下文文件** (15-30分钟)
   - 阅读主题上下文文件
   - 查看工作会话记录
   - 回顾项目知识图谱中的相关部分

2. **刷新知识** (20-30分钟)
   - 回顾关键概念和定义
   - 查看术语表中的相关术语
   - 重新熟悉核心理论和模型

3. **重建环境** (10-15分钟)
   - 更新代码库和文档
   - 检查环境配置和依赖
   - 准备开发和测试工具

4. **渐进式恢复** (30-60分钟)
   - 从回顾和总结开始
   - 进行小规模的改进或修复
   - 逐步过渡到主要任务

### 5.3 长期中断恢复流程

**适用场景**: 数周或更长时间的中断

**执行步骤**:

1. **系统性回顾** (2-4小时)
   - 阅读`context_management.md`
   - 查看项目知识图谱和术语表
   - 回顾项目未来发展规划
   - 了解项目质量完善报告

2. **知识重建** (半天到一天)
   - 回顾主题的理论基础
   - 研读形式化定义和证明
   - 查看代码实现和测试用例
   - 了解最新的行业标准和技术

3. **环境重建** (2-4小时)
   - 重新配置开发环境
   - 更新所有依赖和工具
   - 验证系统和权限设置
   - 准备测试数据和资源

4. **重构工作计划** (1-2小时)
   - 评估原计划的可行性
   - 根据当前情况调整优先级
   - 制定新的里程碑和时间表
   - 与团队同步和协调

5. **分阶段恢复** (数天)
   - 第一天：环境准备和知识回顾
   - 第二天：简单任务和文档更新
   - 第三天：核心功能和复杂问题
   - 后续：全面恢复正常工作节奏

## 6. 上下文管理最佳实践

### 6.1 日常工作最佳实践

1. **定期保存思路**
   - 每30-60分钟记录一次当前思路
   - 使用思维导图或笔记工具记录思考过程
   - 对关键决策点添加详细注释

2. **使用标准化标记**
   - 在代码中使用`// TODO`, `// FIXME`, `// NOTE`等标准注释
   - 在文档中使用统一的状态标记（✅, ⏳, ❌）
   - 为恢复点添加明显的`// RECOVERY POINT`标记

3. **维护任务上下文列表**
   - 保持更新的任务待办列表
   - 记录任务间的依赖关系
   - 标注任务的优先级和状态

### 6.2 团队协作最佳实践

1. **上下文共享机制**
   - 使用共享的知识库记录上下文信息
   - 定期进行上下文同步会议
   - 建立标准化的上下文交接流程

2. **文档审查与维护**
   - 定期审查上下文文档的质量和完整性
   - 轮流负责维护核心上下文文件
   - 建立文档更新的激励机制

3. **知识冗余策略**
   - 确保关键知识有多人掌握
   - 使用多种形式记录重要信息
   - 定期进行知识共享和培训

### 6.3 工具与自动化最佳实践

1. **工具选择与集成**
   - 选择支持上下文管理的工具（如Notion, Obsidian）
   - 将工具集成到日常工作流程中
   - 确保工具间的数据互通

2. **自动化上下文捕获**
   - 使用IDE插件自动记录编码会话
   - 配置自动保存和版本控制
   - 使用截图和录屏工具记录可视化上下文

3. **上下文检索优化**
   - 建立统一的检索系统
   - 使用标签和元数据提高检索效率
   - 定期优化索引和分类系统

## 7. 上下文管理评估与改进

### 7.1 评估指标

1. **恢复效率**
   - 中断后恢复到全效工作状态的时间
   - 恢复后的工作质量与中断前的对比
   - 恢复过程中遇到的问题数量

2. **知识保留率**
   - 中断后能够回忆的关键知识点比例
   - 不需要重新学习的概念比例
   - 决策理由的完整记录比例

3. **上下文管理成本**
   - 上下文记录和维护所需的时间
   - 上下文管理工具和系统的使用难度
   - 上下文管理对工作流的干扰程度

### 7.2 定期评审机制

1. **周度上下文审查**
   - 每周末审查当周的上下文管理情况
   - 识别改进机会和最佳实践
   - 调整下周的上下文管理策略

2. **月度上下文评估**
   - 每月评估上下文管理效果
   - 分析中断恢复的效率和问题
   - 更新上下文管理流程和模板

3. **季度上下文优化**
   - 每季度全面审查上下文管理系统
   - 进行团队反馈收集和分析
   - 实施重大改进和流程优化

### 7.3 持续改进策略

1. **经验教训收集**
   - 记录上下文管理中的成功经验
   - 分析失败案例和原因
   - 建立经验教训数据库

2. **流程优化**
   - 基于评估结果优化上下文管理流程
   - 简化繁琐步骤，加强关键环节
   - 调整模板和工具以提高效率

3. **培训与能力建设**
   - 开展上下文管理技能培训
   - 分享个人最佳实践和技巧
   - 提高团队整体的上下文管理能力

---

**最后更新**: 2024年12月25日  
**文档版本**: v1.1  
**状态**: 已审核
