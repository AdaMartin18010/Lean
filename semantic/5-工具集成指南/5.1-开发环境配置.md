# 5.1 å¼€å‘ç¯å¢ƒé…ç½® / Development Environment Setup

[è¿”å›ç›®å½•](../README.md) | [ä¸‹ä¸€èŠ‚](5.2-IDEé›†æˆ.md)

---

## æ¦‚è¿° / Overview

æœ¬æ–‡æ¡£æä¾›Leanè¯­è¨€å¼€å‘ç¯å¢ƒçš„å®Œæ•´é…ç½®æŒ‡å—ï¼ŒåŒ…æ‹¬ç³»ç»Ÿè¦æ±‚ã€å®‰è£…æ­¥éª¤ã€ç¯å¢ƒé…ç½®å’ŒéªŒè¯æ–¹æ³•ã€‚æˆ‘ä»¬å°†ä»åŸºç¡€ç¯å¢ƒå¼€å§‹ï¼Œé€æ­¥é…ç½®å®Œæ•´çš„Leanå¼€å‘ç¯å¢ƒï¼Œç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿé¡ºåˆ©å¼€å§‹Leanè¯­è¨€çš„å­¦ä¹ å’Œå¼€å‘ã€‚

## 1. ç³»ç»Ÿè¦æ±‚ / System Requirements

### 1.1 ç¡¬ä»¶è¦æ±‚ / Hardware Requirements

**æœ€ä½é…ç½®**ï¼š

- **CPU**ï¼šåŒæ ¸å¤„ç†å™¨ï¼Œ2.0GHzä»¥ä¸Š
- **å†…å­˜**ï¼š4GB RAMï¼ˆæ¨è8GBä»¥ä¸Šï¼‰
- **å­˜å‚¨**ï¼š10GBå¯ç”¨ç£ç›˜ç©ºé—´
- **ç½‘ç»œ**ï¼šç¨³å®šçš„äº’è”ç½‘è¿æ¥

**æ¨èé…ç½®**ï¼š

- **CPU**ï¼šå››æ ¸å¤„ç†å™¨ï¼Œ3.0GHzä»¥ä¸Š
- **å†…å­˜**ï¼š16GB RAM
- **å­˜å‚¨**ï¼š50GBå¯ç”¨ç£ç›˜ç©ºé—´ï¼ˆSSDæ¨èï¼‰
- **ç½‘ç»œ**ï¼šé«˜é€Ÿäº’è”ç½‘è¿æ¥

### 1.2 æ“ä½œç³»ç»Ÿæ”¯æŒ / Operating System Support

**Windows**ï¼š

- Windows 10 ç‰ˆæœ¬1903æˆ–æ›´é«˜ç‰ˆæœ¬
- Windows 11ï¼ˆæ¨èï¼‰
- æ”¯æŒWSL2ï¼ˆWindows Subsystem for Linuxï¼‰

**macOS**ï¼š

- macOS 10.15ï¼ˆCatalinaï¼‰æˆ–æ›´é«˜ç‰ˆæœ¬
- macOS 11ï¼ˆBig Surï¼‰æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆæ¨èï¼‰
- æ”¯æŒApple Siliconï¼ˆM1/M2ï¼‰å’ŒIntelå¤„ç†å™¨

**Linux**ï¼š

- Ubuntu 18.04 LTSæˆ–æ›´é«˜ç‰ˆæœ¬
- Debian 10æˆ–æ›´é«˜ç‰ˆæœ¬
- CentOS 8æˆ–æ›´é«˜ç‰ˆæœ¬
- å…¶ä»–ä¸»æµLinuxå‘è¡Œç‰ˆ

## 2. åŸºç¡€ç¯å¢ƒå®‰è£… / Basic Environment Installation

### 2.1 å®‰è£…Git / Install Git

**Windows**ï¼š

```powershell
# ä½¿ç”¨Chocolateyå®‰è£…
choco install git

# æˆ–ä¸‹è½½å®‰è£…åŒ…
# https://git-scm.com/download/win
```

**macOS**ï¼š

```bash
# ä½¿ç”¨Homebrewå®‰è£…
brew install git

# æˆ–ä½¿ç”¨Xcode Command Line Tools
xcode-select --install
```

**Linux**ï¼š

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install git

# CentOS/RHEL
sudo yum install git
# æˆ–
sudo dnf install git
```

**éªŒè¯å®‰è£…**ï¼š

```bash
git --version
```

### 2.2 å®‰è£…Node.js / Install Node.js

**Windows**ï¼š

```powershell
# ä½¿ç”¨Chocolateyå®‰è£…
choco install nodejs

# æˆ–ä¸‹è½½å®‰è£…åŒ…
# https://nodejs.org/
```

**macOS**ï¼š

```bash
# ä½¿ç”¨Homebrewå®‰è£…
brew install node

# æˆ–ä½¿ç”¨nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install node
```

**Linux**ï¼š

```bash
# Ubuntu/Debian
curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
sudo apt-get install -y nodejs

# CentOS/RHEL
curl -fsSL https://rpm.nodesource.com/setup_lts.x | sudo bash -
sudo yum install -y nodejs
```

**éªŒè¯å®‰è£…**ï¼š

```bash
node --version
npm --version
```

### 2.3 å®‰è£…Python / Install Python

**Windows**ï¼š

```powershell
# ä½¿ç”¨Chocolateyå®‰è£…
choco install python

# æˆ–ä¸‹è½½å®‰è£…åŒ…
# https://www.python.org/downloads/
```

**macOS**ï¼š

```bash
# ä½¿ç”¨Homebrewå®‰è£…
brew install python

# æˆ–ä½¿ç”¨pyenv
brew install pyenv
pyenv install 3.11.0
pyenv global 3.11.0
```

**Linux**ï¼š

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install python3 python3-pip

# CentOS/RHEL
sudo yum install python3 python3-pip
# æˆ–
sudo dnf install python3 python3-pip
```

**éªŒè¯å®‰è£…**ï¼š

```bash
python3 --version
pip3 --version
```

## 3. Lean 4å®‰è£… / Lean 4 Installation

### 3.1 å®‰è£…Elan / Install Elan

**Elan**æ˜¯Lean 4çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼äºRustçš„rustupã€‚

**Windows**ï¼š

```powershell
# ä½¿ç”¨PowerShellå®‰è£…
Invoke-WebRequest -Uri "https://raw.githubusercontent.com/leanprover/elan/master/elan-init.ps1" -OutFile "elan-init.ps1"
.\elan-init.ps1

# æˆ–ä½¿ç”¨Chocolatey
choco install elan
```

**macOS**ï¼š

```bash
# ä½¿ç”¨curlå®‰è£…
curl https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh -sSf | sh

# æˆ–ä½¿ç”¨Homebrew
brew install elan
```

**Linux**ï¼š

```bash
# ä½¿ç”¨curlå®‰è£…
curl https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh -sSf | sh
```

**éªŒè¯å®‰è£…**ï¼š

```bash
elan --version
lean --version
```

### 3.2 å®‰è£…Lean 4 / Install Lean 4

**å®‰è£…æœ€æ–°ç¨³å®šç‰ˆ**ï¼š

```bash
elan toolchain install stable
elan default stable
```

**å®‰è£…ç‰¹å®šç‰ˆæœ¬**ï¼š

```bash
# æŸ¥çœ‹å¯ç”¨ç‰ˆæœ¬
elan toolchain list

# å®‰è£…ç‰¹å®šç‰ˆæœ¬
elan toolchain install 4.0.0
elan default 4.0.0
```

**éªŒè¯å®‰è£…**ï¼š

```bash
lean --version
lean --help
```

### 3.3 å®‰è£…Lake / Install Lake

**Lake**æ˜¯Lean 4çš„åŒ…ç®¡ç†å™¨å’Œæ„å»ºå·¥å…·ã€‚

**å®‰è£…Lake**ï¼š

```bash
# Lakeé€šå¸¸éšLean 4ä¸€èµ·å®‰è£…
lake --version

# å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥æ‰‹åŠ¨å®‰è£…
elan toolchain install stable
elan default stable
```

**éªŒè¯å®‰è£…**ï¼š

```bash
lake --version
lake --help
```

## 4. å¼€å‘å·¥å…·å®‰è£… / Development Tools Installation

### 4.1 å®‰è£…VS Code / Install VS Code

**Windows**ï¼š

```powershell
# ä½¿ç”¨Chocolateyå®‰è£…
choco install vscode

# æˆ–ä¸‹è½½å®‰è£…åŒ…
# https://code.visualstudio.com/
```

**macOS**ï¼š

```bash
# ä½¿ç”¨Homebrewå®‰è£…
brew install --cask visual-studio-code

# æˆ–ä»App Storeå®‰è£…
```

**Linux**ï¼š

```bash
# Ubuntu/Debian
wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > packages.microsoft.gpg
sudo install -o root -g root -m 644 packages.microsoft.gpg /etc/apt/trusted.gpg.d/
sudo sh -c 'echo "deb [arch=amd64,arm64,armhf signed-by=/etc/apt/trusted.gpg.d/packages.microsoft.gpg] https://packages.microsoft.com/repos/code stable main" > /etc/apt/sources.list.d/vscode.list'
sudo apt update
sudo apt install code

# CentOS/RHEL
sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc
sudo sh -c 'echo -e "[code]\nname=Visual Studio Code\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\nenabled=1\ngpgcheck=1\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc" > /etc/yum.repos.d/vscode.repo'
sudo yum install code
```

**éªŒè¯å®‰è£…**ï¼š

```bash
code --version
```

### 4.2 å®‰è£…Lean 4æ‰©å±• / Install Lean 4 Extension

**é€šè¿‡VS Codeå®‰è£…**ï¼š

1. æ‰“å¼€VS Code
2. æŒ‰`Ctrl+Shift+X`ï¼ˆWindows/Linuxï¼‰æˆ–`Cmd+Shift+X`ï¼ˆmacOSï¼‰æ‰“å¼€æ‰©å±•é¢æ¿
3. æœç´¢"Lean 4"
4. å®‰è£…"Lean 4"æ‰©å±•

**é€šè¿‡å‘½ä»¤è¡Œå®‰è£…**ï¼š

```bash
code --install-extension leanprover.lean4
```

**éªŒè¯å®‰è£…**ï¼š

1. æ‰“å¼€VS Code
2. æ£€æŸ¥æ‰©å±•æ˜¯å¦å·²å®‰è£…å¹¶å¯ç”¨
3. åˆ›å»ºæ–°çš„`.lean`æ–‡ä»¶æµ‹è¯•è¯­æ³•é«˜äº®

### 4.3 å®‰è£…å…¶ä»–æœ‰ç”¨æ‰©å±• / Install Other Useful Extensions

**æ¨èæ‰©å±•**ï¼š

```bash
# å®‰è£…å¤šä¸ªæ‰©å±•
code --install-extension ms-vscode.vscode-json
code --install-extension redhat.vscode-yaml
code --install-extension ms-vscode.powershell
code --install-extension ms-python.python
code --install-extension ms-vscode.cpptools
```

**æ‰©å±•åˆ—è¡¨**ï¼š

- **JSON**ï¼šJSONæ–‡ä»¶æ”¯æŒ
- **YAML**ï¼šYAMLæ–‡ä»¶æ”¯æŒ
- **PowerShell**ï¼šPowerShellæ”¯æŒ
- **Python**ï¼šPythonæ”¯æŒ
- **C/C++**ï¼šC/C++æ”¯æŒ

## 5. é¡¹ç›®é…ç½® / Project Configuration

### 5.1 åˆ›å»ºæ–°é¡¹ç›® / Create New Project

**ä½¿ç”¨Lakeåˆ›å»ºé¡¹ç›®**ï¼š

```bash
# åˆ›å»ºæ–°é¡¹ç›®
lake new my_lean_project

# è¿›å…¥é¡¹ç›®ç›®å½•
cd my_lean_project

# æŸ¥çœ‹é¡¹ç›®ç»“æ„
ls -la
```

**é¡¹ç›®ç»“æ„**ï¼š

```text
my_lean_project/
â”œâ”€â”€ MyLeanProject/
â”‚   â”œâ”€â”€ Basic.lean
â”‚   â””â”€â”€ Main.lean
â”œâ”€â”€ lakefile.lean
â”œâ”€â”€ lean-toolchain
â””â”€â”€ README.md
```

### 5.2 é…ç½®lakefile.lean / Configure lakefile.lean

**åŸºæœ¬é…ç½®**ï¼š

```lean
import Lake
open Lake DSL

package Â«my_lean_projectÂ» where
  -- åŒ…é…ç½®

@[default_target]
lean_lib Â«MyLeanProjectÂ» where
  -- åº“é…ç½®
```

**æ·»åŠ ä¾èµ–**ï¼š

```lean
import Lake
open Lake DSL

package Â«my_lean_projectÂ» where
  -- åŒ…é…ç½®

require mathlib from git
  "https://github.com/leanprover-community/mathlib4.git"

@[default_target]
lean_lib Â«MyLeanProjectÂ» where
  -- åº“é…ç½®
```

### 5.3 é…ç½®lean-toolchain / Configure lean-toolchain

**æŒ‡å®šLeanç‰ˆæœ¬**ï¼š

```text
leanprover/lean4:v4.0.0
```

**ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬**ï¼š

```text
leanprover/lean4:stable
```

## 6. ç¯å¢ƒéªŒè¯ / Environment Verification

### 6.1 éªŒè¯Leanå®‰è£… / Verify Lean Installation

**æ£€æŸ¥ç‰ˆæœ¬**ï¼š

```bash
lean --version
elan --version
lake --version
```

**æµ‹è¯•åŸºæœ¬åŠŸèƒ½**ï¼š

```bash
# åˆ›å»ºæµ‹è¯•æ–‡ä»¶
echo 'def hello : String := "Hello, Lean!"' > test.lean

# ç¼–è¯‘æµ‹è¯•æ–‡ä»¶
lean test.lean

# æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯
echo $?
```

### 6.2 éªŒè¯VS Codeé›†æˆ / Verify VS Code Integration

**æµ‹è¯•æ­¥éª¤**ï¼š

1. æ‰“å¼€VS Code
2. åˆ›å»ºæ–°æ–‡ä»¶`test.lean`
3. è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

    ```lean
    def hello : String := "Hello, Lean!"
    #check hello
    ```

4. ä¿å­˜æ–‡ä»¶
5. æ£€æŸ¥æ˜¯å¦æœ‰è¯­æ³•é«˜äº®å’Œé”™è¯¯æç¤º

### 6.3 éªŒè¯é¡¹ç›®æ„å»º / Verify Project Build

**æ„å»ºé¡¹ç›®**ï¼š

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd my_lean_project

# æ„å»ºé¡¹ç›®
lake build

# æ£€æŸ¥æ„å»ºç»“æœ
ls -la build/
```

**è¿è¡Œæµ‹è¯•**ï¼š

```bash
# è¿è¡Œé¡¹ç›®æµ‹è¯•
lake test

# æ£€æŸ¥æµ‹è¯•ç»“æœ
echo $?
```

## 7. å¸¸è§é—®é¢˜è§£å†³ / Common Issues and Solutions

### 7.1 å®‰è£…é—®é¢˜ / Installation Issues

**é—®é¢˜1ï¼šelanå®‰è£…å¤±è´¥**:

```bash
# è§£å†³æ–¹æ¡ˆï¼šæ‰‹åŠ¨ä¸‹è½½å®‰è£…
curl -L https://github.com/leanprover/elan/releases/latest/download/elan-x86_64-unknown-linux-gnu.tar.gz | tar xz
./elan-init -y
```

**é—®é¢˜2ï¼šLeanç‰ˆæœ¬ä¸åŒ¹é…**:

```bash
# è§£å†³æ–¹æ¡ˆï¼šæ›´æ–°å·¥å…·é“¾
elan self update
elan toolchain install stable
elan default stable
```

**é—®é¢˜3ï¼šVS Codeæ‰©å±•ä¸å·¥ä½œ**:

```bash
# è§£å†³æ–¹æ¡ˆï¼šé‡æ–°å®‰è£…æ‰©å±•
code --uninstall-extension leanprover.lean4
code --install-extension leanprover.lean4
```

### 7.2 é…ç½®é—®é¢˜ / Configuration Issues

**é—®é¢˜1ï¼šé¡¹ç›®æ„å»ºå¤±è´¥**:

```bash
# è§£å†³æ–¹æ¡ˆï¼šæ¸…ç†å¹¶é‡æ–°æ„å»º
lake clean
lake build
```

**é—®é¢˜2ï¼šä¾èµ–ä¸‹è½½å¤±è´¥**:

```bash
# è§£å†³æ–¹æ¡ˆï¼šæ‰‹åŠ¨æ›´æ–°ä¾èµ–
lake update
lake build
```

**é—®é¢˜3ï¼šè·¯å¾„é—®é¢˜**:

```bash
# è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥ç¯å¢ƒå˜é‡
echo $PATH
which lean
which lake
```

### 7.3 æ€§èƒ½é—®é¢˜ / Performance Issues

**é—®é¢˜1ï¼šç¼–è¯‘é€Ÿåº¦æ…¢**:

```bash
# è§£å†³æ–¹æ¡ˆï¼šå¢åŠ å¹¶è¡Œåº¦
export LEAN_CC="gcc -j$(nproc)"
lake build
```

**é—®é¢˜2ï¼šå†…å­˜ä¸è¶³**:

```bash
# è§£å†³æ–¹æ¡ˆï¼šé™åˆ¶å†…å­˜ä½¿ç”¨
export LEAN_MEMORY_LIMIT=4096
lake build
```

## 8. é«˜çº§é…ç½® / Advanced Configuration

### 8.1 è‡ªå®šä¹‰æ„å»ºé…ç½® / Custom Build Configuration

**lakefile.leané«˜çº§é…ç½®**ï¼š

```lean
import Lake
open Lake DSL

package Â«my_lean_projectÂ» where
  -- åŒ…é…ç½®
  version := "0.1.0"
  dependencies := #[]

require mathlib from git
  "https://github.com/leanprover-community/mathlib4.git"

@[default_target]
lean_lib Â«MyLeanProjectÂ» where
  -- åº“é…ç½®
  roots := #[`MyLeanProject]

lean_exe Â«my_lean_projectÂ» where
  root := `Main
  supportInterpreter := true
```

### 8.2 å¼€å‘å·¥å…·é…ç½® / Development Tools Configuration

**VS Codeè®¾ç½®**ï¼š

```json
{
  "lean4.serverLogging.enabled": true,
  "lean4.serverLogging.path": "~/.lean/logs",
  "lean4.serverLogging.level": "info",
  "lean4.serverLogging.verbosity": 1
}
```

**Gité…ç½®**ï¼š

```bash
# é…ç½®Gitç”¨æˆ·ä¿¡æ¯
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# é…ç½®Gitç¼–è¾‘å™¨
git config --global core.editor "code --wait"
```

### 8.3 æ€§èƒ½ä¼˜åŒ– / Performance Optimization

**ç³»ç»Ÿä¼˜åŒ–**ï¼š

```bash
# å¢åŠ æ–‡ä»¶æè¿°ç¬¦é™åˆ¶
ulimit -n 65536

# ä¼˜åŒ–å†…å­˜ä½¿ç”¨
export LEAN_MEMORY_LIMIT=8192

# å¯ç”¨å¹¶è¡Œç¼–è¯‘
export LEAN_CC="gcc -j$(nproc)"
```

## 9. äº¤å‰å¼•ç”¨ / Cross-References

### 9.1 ç›¸å…³ç« èŠ‚ / Related Sections

- [5.2 IDEé›†æˆ](5.2-IDEé›†æˆ.md)
- [5.3 ç¼–è¯‘å™¨é…ç½®](5.3-ç¼–è¯‘å™¨é…ç½®.md)
- [5.4 åŒ…ç®¡ç†](5.4-åŒ…ç®¡ç†.md)
- [5.5 è°ƒè¯•å·¥å…·](5.5-è°ƒè¯•å·¥å…·.md)

### 9.2 å¤–éƒ¨èµ„æº / External Resources

- [Lean 4 å®˜æ–¹æ–‡æ¡£](https://leanprover.github.io/lean4/doc/)
- [Elan å®‰è£…æŒ‡å—](https://github.com/leanprover/elan)
- [Lake åŒ…ç®¡ç†å™¨](https://github.com/leanprover/lake)
- [VS Code Lean 4 æ‰©å±•](https://marketplace.visualstudio.com/items?itemName=leanprover.lean4)

---

## å˜æ›´è®°å½• / Change Log

### v2025-01-01

- åˆå§‹ç‰ˆæœ¬åˆ›å»º
- å»ºç«‹å®Œæ•´çš„å¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—
- æ¶µç›–æ‰€æœ‰ä¸»æµæ“ä½œç³»ç»Ÿ
- æä¾›è¯¦ç»†çš„å®‰è£…å’Œé…ç½®æ­¥éª¤

---

*æœ€åæ›´æ–°ï¼š2025-09-11*  
*ç‰ˆæœ¬ï¼šv2025-09*  
*çŠ¶æ€ï¼šè¿›è¡Œä¸­ ğŸ”„*
