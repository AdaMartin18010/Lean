# 1.9.1 自然演绎系统 / Natural Deduction System

[返回目录](../CONTINUOUS_PROGRESS.md) | [上一节: 1.9-证明论与推理系统.md](1.9-证明论与推理系统.md)

---

## 1.9.1.1 核心定义 / Core Definition

**中文**：自然演绎系统是一种形式化推理系统，直接模拟人类直觉推理，采用引入与消解规则描述命题逻辑与谓词逻辑的证明过程。它是最接近人类自然思维方式的逻辑系统，广泛应用于数学证明和计算机科学中。

**English**: Natural deduction is a formal reasoning system that directly models human intuitive reasoning, using introduction and elimination rules to describe proofs in propositional and predicate logic. It is the logical system closest to human natural thinking, widely used in mathematical proofs and computer science.

### 1.9.1.1.1 历史背景 / Historical Background

自然演绎系统由Gerhard Gentzen在1934年提出，旨在提供一个更接近人类直觉推理的形式化系统。它避免了公理化方法的复杂性，直接使用推理规则来构建证明。

### 1.9.1.1.2 核心思想 / Core Ideas

1. **引入规则**：如何构造复合命题
2. **消解规则**：如何使用复合命题
3. **假设管理**：如何处理临时假设
4. **证明结构**：如何组织证明步骤

---

## 1.9.1.2 形式化模型 / Formal Model

### 1.9.1.2.1 引入规则 / Introduction Rules

**合取引入**：
$$\frac{A \quad B}{A \land B} \land I$$

**析取引入**：
$$\frac{A}{A \lor B} \lor I_1 \quad \frac{B}{A \lor B} \lor I_2$$

**蕴含引入**：
$$\frac{[A] \quad \vdots \quad B}{A \to B} \to I$$

**全称引入**：
$$\frac{A(x)}{\forall x. A(x)} \forall I \quad (x \text{ 不在假设中自由出现})$$

**存在引入**：
$$\frac{A(t)}{\exists x. A(x)} \exists I$$

### 1.9.1.2.2 消解规则 / Elimination Rules

**合取消解**：
$$\frac{A \land B}{A} \land E_1 \quad \frac{A \land B}{B} \land E_2$$

**析取消解**：
$$\frac{A \lor B \quad [A] \quad \vdots \quad C \quad [B] \quad \vdots \quad C}{C} \lor E$$

**蕴含消解**：
$$\frac{A \to B \quad A}{B} \to E$$

**全称消解**：
$$\frac{\forall x. A(x)}{A(t)} \forall E$$

**存在消解**：
$$\frac{\exists x. A(x) \quad [A(x)] \quad \vdots \quad B}{B} \exists E \quad (x \text{ 不在 } B \text{ 中自由出现})$$

### 1.9.1.2.3 证明树结构 / Proof Tree Structure

自然演绎的证明采用树形结构，每个节点是一个命题，边表示推理规则的应用：

```text
    A    B
    -------- ∧I
      A∧B
      |
      A    (A∧B)→C
      ------------ →E
          C
```

---

## 1.9.1.3 Lean 代码示例 / Lean Code Example

### 1.9.1.3.1 基本推理规则 / Basic Inference Rules

```lean
-- 蕴含传递律：自然演绎证明
lemma imp_trans (A B C : Prop) : (A → B) → (B → C) → (A → C) := by
  intro h₁ h₂ a
  apply h₂
  apply h₁
  exact a

-- 等价形式：使用λ表达式
lemma imp_trans_lambda (A B C : Prop) : (A → B) → (B → C) → (A → C) :=
  λ h₁ h₂ a => h₂ (h₁ a)

-- 合取引入规则
lemma and_intro (A B : Prop) : A → B → A ∧ B := by
  intro ha hb
  constructor
  · exact ha
  · exact hb

-- 合取消解规则
lemma and_elim_left (A B : Prop) : A ∧ B → A := by
  intro h
  cases h with
  | intro ha hb => exact ha

lemma and_elim_right (A B : Prop) : A ∧ B → B := by
  intro h
  cases h with
  | intro ha hb => exact hb
```

### 1.9.1.3.2 复杂推理示例 / Complex Reasoning Examples

```lean
-- 析取三段论
lemma disj_syllogism (A B C : Prop) : (A ∨ B) → (A → C) → (B → C) → C := by
  intro h_or h_ac h_bc
  cases h_or with
  | inl ha => exact h_ac ha
  | inr hb => exact h_bc hb

-- 双重否定消除
lemma double_neg_elim (A : Prop) : ¬¬A → A := by
  intro h
  by_contra h_not_a
  contradiction

-- 排中律应用
lemma excluded_middle (A : Prop) : A ∨ ¬A := by
  by_cases h : A
  · left
    exact h
  · right
    exact h
```

### 1.9.1.3.3 谓词逻辑推理 / Predicate Logic Reasoning

```lean
-- 全称消解
lemma forall_elim {α : Type} {P : α → Prop} (h : ∀ x, P x) (a : α) : P a :=
  h a

-- 全称引入
lemma forall_intro {α : Type} {P : α → Prop} (h : ∀ x, P x) : ∀ x, P x :=
  λ x => h x

-- 存在引入
lemma exists_intro {α : Type} {P : α → Prop} (a : α) (h : P a) : ∃ x, P x :=
  ⟨a, h⟩

-- 存在消解
lemma exists_elim {α : Type} {P : α → Prop} {Q : Prop} 
  (h_exists : ∃ x, P x) (h_impl : ∀ x, P x → Q) : Q := by
  cases h_exists with
  | intro a ha => exact h_impl a ha
```

---

## 1.9.1.4 交叉引用 / Cross References

- [1.9-证明论与推理系统.md](1.9-证明论与推理系统.md)

---

## 1.9.1.5 2025 规范对齐 / Alignment with Lean 4 (2025)

- 自然演绎规则建议以 `theorem`/`lemma` 与结构化 `by` 块呈现，避免过度依赖黑盒自动化。
- 证明脚本中优先使用 `simp`/`intro`/`apply` 等基础战术，并在关键步骤保留解释性。

---

## 1.9.1.6 版本兼容性 / Version Compatibility

- 证明脚本在 Lean 3/4 间大多可迁移，但 tactic 语法需更新为 Lean 4 风格（`elab ... : tactic`）。

---

## 1.9.1.7 参考资料 / References

- 逻辑学教材：自然演绎章节
- Lean 4 Reference Manual（Proofs & Tactics）
