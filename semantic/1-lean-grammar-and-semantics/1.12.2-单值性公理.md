# 1.12.2 单值性公理 / Univalence Axiom

[返回目录](../CONTINUOUS_PROGRESS.md) | [上一节: 1.12.1-路径类型与等价.md](1.12.1-路径类型与等价.md)

---

## 1.12.2.1 核心定义 / Core Definition

**中文**：单值性公理（Univalence Axiom）是 HoTT 的核心公理，断言等价类型之间可以互换。它统一了类型论和拓扑学，为数学基础提供了新的视角。

**English**: The Univalence Axiom is a core axiom of HoTT, asserting that equivalent types can be identified/interchanged. It unifies type theory and topology, providing a new perspective on mathematical foundations.

### 1.12.2.1.1 数学背景 / Mathematical Background

单值性公理源于同伦论中的思想，将类型视为空间，类型等价视为同伦等价。这为数学提供了一个统一的框架，其中集合论、范畴论和拓扑学都可以在类型论中表达。

### 1.12.2.1.2 核心思想 / Core Ideas

1. **类型即空间**：每个类型对应一个拓扑空间
2. **等价即同伦**：类型等价对应同伦等价
3. **相等即等价**：类型相等蕴含类型等价
4. **单值性**：类型等价蕴含类型相等

---

## 1.12.2.2 形式化模型 / Formal Model

### 1.12.2.2.1 公理表述 / Axiom Statement

单值性公理可以形式化表述为：

$$(A \simeq B) \simeq (A = B)$$

其中 $A \simeq B$ 表示类型 $A$ 和 $B$ 等价，$A = B$ 表示类型相等。

### 1.12.2.2.2 等价类型定义 / Equivalence Definition

等价类型定义为：

$$A \simeq B := \sum_{f:A \to B} \text{isEquiv}(f)$$

其中 $\text{isEquiv}(f)$ 表示函数 $f$ 是等价。

### 1.12.2.2.3 等价函数性质 / Equivalence Properties

函数 $f : A \to B$ 是等价当且仅当：

1. **满射性**：$\forall y : B, \exists x : A, f(x) = y$
2. **单射性**：$\forall x_1, x_2 : A, f(x_1) = f(x_2) \to x_1 = x_2$
3. **同伦性**：存在逆函数 $g : B \to A$ 使得 $g \circ f \sim \text{id}_A$ 且 $f \circ g \sim \text{id}_B$

- 类型等价与等式的统一

---

## 1.12.2.3 Lean 代码示例 / Lean Code Example

### 1.12.2.3.1 等价类型定义 / Equivalence Type Definition

```lean
-- 等价类型定义
def Equiv (α β : Type) : Type :=
  Σ f : α → β, is_equiv f

-- 等价函数性质
def is_equiv {α β : Type} (f : α → β) : Prop :=
  ∃ g : β → α, (∀ x, g (f x) = x) ∧ (∀ y, f (g y) = y)

-- 等价类型构造
def equiv_mk {α β : Type} (f : α → β) (g : β → α) 
  (h1 : ∀ x, g (f x) = x) (h2 : ∀ y, f (g y) = y) : Equiv α β :=
  ⟨f, ⟨g, ⟨h1, h2⟩⟩⟩
```

### 1.12.2.3.2 单值性公理实现 / Univalence Axiom Implementation

```lean
-- 单值性公理（在 Lean 中作为公理）
axiom univalence {α β : Type} : Equiv α β ≃ (α = β)

-- 单值性公理的应用
def univalence_elim {α β : Type} (e : Equiv α β) : α = β :=
  (univalence e).1

def univalence_intro {α β : Type} (p : α = β) : Equiv α β :=
  (univalence.symm p).1
```

### 1.12.2.3.3 实际应用示例 / Practical Application Examples

```lean
-- 示例：Bool 和 Unit + Unit 的等价
def bool_to_sum : Bool → Unit ⊕ Unit
| Bool.true => Sum.inl Unit.unit
| Bool.false => Sum.inr Unit.unit

def sum_to_bool : Unit ⊕ Unit → Bool
| Sum.inl _ => Bool.true
| Sum.inr _ => Bool.false

-- 证明等价
theorem bool_equiv_sum : Equiv Bool (Unit ⊕ Unit) := by
  exists bool_to_sum
  exists sum_to_bool
  constructor
  · intro b
    cases b <;> rfl
  · intro s
    cases s <;> rfl

-- 应用单值性公理
def bool_eq_sum : Bool = (Unit ⊕ Unit) :=
  univalence_elim bool_equiv_sum
```

---

## 1.12.2.4 交叉引用 / Cross References

- [1.12-同伦类型论.md](1.12-同伦类型论.md)

---

## 1.12.2.5 2025 规范对齐 / Alignment with Lean 4 (2025)

- HoTT/单值性公理通常以公理化方式引入，应清晰标注其对一致性的影响与适用范围。
- 与核心内核分离：不将 HoTT 扩展混入通用库的计算路径，避免影响可计算性。
- 示例若为公理化，应避免误导性“可计算”展示，主张以等价/传输定理的形式示范使用方式。

---

## 1.12.2.6 版本兼容性 / Version Compatibility

- Lean 4 的基础内核不内置 HoTT；若使用相关扩展或库，请注明来源与版本。
- 区分实验性与稳定性接口；优先使用已验证的公共接口。

---

## 1.12.2.7 参考资料 / References

- HoTT Book（Univalence 章节）
- Lean/HoTT 社区资源与教程
